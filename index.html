<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TANGO‚ÄôS | Smoothies </title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet" />
  <style>
    :root {
      --black: #000000;
      --white: #ffffff;
      --yellow: #FFB308;
      --gray: #111111;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Inter',sans-serif;
      background:linear-gradient(to bottom,var(--black),#1a1a1a);
      color:var(--white); overflow-x:hidden;
    }
    header {
      background:var(--black);
      border-bottom:3px solid var(--yellow);
      display:flex; justify-content:space-between; align-items:center;
      padding:1rem; position:sticky; top:0; z-index:10;
    }
    .logo-jump { height:48px; animation:bounce 1.6s infinite ease-in-out; cursor:pointer; }
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
    nav a { color:var(--yellow); font-weight:700; text-decoration:none; font-size:1rem; }
    .portada {
      text-align:center; padding:4rem 1.5rem 2rem;
      background:radial-gradient(circle at top center,#2c2c2c,#000);
      box-shadow:inset 0 -30px 80px rgba(0,0,0,0.7);
      position:relative;
    }
    .logo-principal {
      width:240px; max-width:90%; margin-bottom:1rem;
      filter:drop-shadow(0 0 15px rgba(255,179,8,0.25));
      animation:fadeInScale 1s ease-out; position:relative; z-index:1;
    }
    @keyframes fadeInScale{0%{opacity:0;transform:scale(0.85)}100%{opacity:1;transform:scale(1)}}
    .portada p { color:#ccc; font-size:1.05rem; max-width:320px; margin:0 auto 1.5rem; position:relative; z-index:1; }
    .btn-hero {
      background:var(--yellow); color:var(--black); font-weight:900;
      padding:1rem 2rem; border-radius:50px; border:none; cursor:pointer;
      box-shadow:0 0 12px rgba(255,179,8,0.5); transition:transform .2s, box-shadow .2s; z-index:1;
    }
    .btn-hero:hover { transform:scale(1.05); box-shadow:0 0 18px rgba(255,179,8,0.75); }
    .ubicanos-link {
      display:block; color:var(--yellow); font-size:1.4rem; font-weight:900;
      margin:2rem 0 1rem; text-decoration:none; position:relative; z-index:1;
    }
    #map {
      width:100%; height:300px; border-radius:20px; margin-bottom:2rem;
      border:6px dashed var(--yellow); background:#fff; outline-offset:-5px;
    }

    /* separar contenedores */
    .categoria-container, .menu-container {
      width:100vw; box-sizing:border-box; padding:2rem 0;
    }
    .categoria-container {
      background:radial-gradient(circle at top center,#2c2c2c,#000);
    }
    .menu-container { background:#fff; color:#000; margin-top:-40px; }

    .seccion-titulo {
      font-size:2rem; font-weight:900; text-align:center;
      color:var(--yellow); text-transform:uppercase; letter-spacing:1.5px;
      margin:2rem 0 1rem; position:relative;
    }
    .seccion-titulo::after {
      content:""; display:block; width:60px; height:4px;
      background:var(--black); margin:.5rem auto 0; border-radius:2px;
    }

    .categoria-scroll {
      display:flex; overflow-x:auto; gap:1rem;
      padding:1rem 1.5rem; scroll-snap-type:x mandatory;
    }
    .categoria-box {
      flex:0 0 auto; width:130px; scroll-snap-align:start;
      background:#fff; border-radius:16px; text-align:center;
      box-shadow:0 5px 20px rgba(255,215,0,0.25);
      cursor:pointer; transition:transform .3s;
    }
    .categoria-box img { width:100%; height:100px; object-fit:cover; border-top-left-radius:16px;border-top-right-radius:16px; }
    .categoria-box span { padding:.7rem; display:block; font-weight:900; color:#000; }
    .categoria-box.active { border:3px solid var(--yellow); transform:scale(1.05); }

    /* SELECT de subcategor√≠as */
    #subcats { display:none; background:#fff; padding:0 1.5rem; margin-top:-1rem; }
    #subcats select {
      width:100%; max-width:350px; padding:1rem; margin:1rem auto 0;
      font-size:1rem; border:2px solid var(--yellow); border-radius:12px;
      background:#222; color:#fff; appearance:none;
    }

    .productos-grid {
      display:grid; grid-template-columns:1fr; gap:1.5rem;
      padding:1rem 1.5rem; background:#fff;
    }
    .producto-card {
      background:#fff; border:3px solid var(--yellow);
      border-radius:12px; overflow:hidden; box-shadow:0 0 15px rgba(0,0,0,0.1);
      opacity:0; transform:translateY(30px); transition:all .5s;
    }
    .producto-card.visible { opacity:1; transform:translateY(0); }
    .producto-card img { width:100%; height:200px; object-fit:cover; }
    .producto-content { padding:1rem; color:#000; }
    .producto-content h3 { font-size:1.1rem; font-weight:900; }
    .precio { font-weight:bold; margin:.5rem 0; }
    .btn-ws {
      display:inline-block; background:var(--yellow); color:#000;
      padding:.5rem 1rem; border-radius:30px; text-decoration:none; font-weight:700;
    }

    footer {
      background:var(--gray); color:#aaa; text-align:center; padding:2rem 1rem; font-size:.9rem;
    }
    footer hr { border:0; border-top:3px solid var(--yellow); width:100vw; margin-bottom:1rem; }
    .social-icons { display:flex; justify-content:center; gap:1rem; margin-top:1rem;}
    .social-icons a {
      width:40px; height:40px; display:inline-block;
      background:var(--yellow); border-radius:50%; text-align:center; line-height:40px;
      transition:transform .3s;
    }
    .social-icons a:hover { transform:scale(1.1); }
    .social-icons svg { width:24px; height:24px; fill:var(--black); vertical-align:middle; }
  </style>
</head>
<body>

<header>
  <a href="admin.html"><img src="assets/images/logo1.png" alt="Logo" class="logo-jump" /></a>
  <nav><a href="encuesta.html">Encuesta</a></nav>
</header>

<section class="portada" id="portada">
  <img src="assets/images/logo2.png" alt="Tango's" class="logo-principal" />
  <p>Ven a disfrutar de nuestros smoothies llenos de frescura, sabor y energ√≠a, y lleva contigo el mejor sabor de Poza Rica.</p>
  <button class="btn-hero" onclick="mostrarMenu()">Explora el men√∫</button>
  <a href="https://maps.app.goo.gl/swSsLLZGUGFtyFSP8" class="ubicanos-link" target="_blank">üìç Ub√≠canos</a>
  <div id="map"></div>
</section>

<section class="menu-section" id="menu">

  <!-- Categor√≠as -->
  <div class="categoria-container">
    <h2 class="seccion-titulo animado">Categor√≠as</h2>
    <div class="categoria-scroll" id="categorias">
      <div class="categoria-box" data-cat="bebidas"><img src="assets/images/bebidas.png"/><span>Bebidas</span></div>
      <div class="categoria-box" data-cat="snacks"><img src="assets/images/snaks.png"/><span>Snacks</span></div>
      <div class="categoria-box" data-cat="elotes"><img src="assets/images/elotes.png"/><span>Elotes</span></div>
      <div class="categoria-box" data-cat="delicias"><img src="assets/images/delicias.png"/><span>Delicias</span></div>
    </div>
  </div>

  <!-- Select de Subcategor√≠as -->
  <div id="subcats">
    <label for="selectSub" style="color:#000; font-weight:700; display:block; text-align:center; margin-top:1rem;">Mostrar:</label>
    <select id="selectSub">
      <option value="">Todas</option>
    </select>
  </div>

  <!-- Men√∫ -->
  <div class="menu-container">
    <h2 class="seccion-titulo animado">Men√∫</h2>
    <div class="productos-grid" id="productos-container"></div>
  </div>
</section>

<footer>
  <hr>
  <p>&copy; 2025 Tango's | Hecho con ‚ù§Ô∏è‚Äçüî•</p>
  <div class="social-icons">
    <a href="https://www.facebook.com/tangossmoothies" target="_blank">
      <svg viewBox="0 0 24 24"><path d="M12 2C6.49 2 2 6.49 2 12c0 5.51 4.49 10 10 10 5.51 0 10-4.49 10-10 0-5.51-4.49-10-10-10zm0 2c2.75 0 5 2.25 5 5 0 3.01-2.49 5.47-5.5 5.47V12h1.6l.4-2h-2v-1.5c0-.55.45-1 1-1h1v-2h-1c-1.65 0-3 1.35-3 3V10H8v2h2v5h2v-5h2V8z"/></svg>
    </a>
    <a href="https://www.instagram.com/tangos_smoothies/" target="_blank">
      <svg viewBox="0 0 24 24"><path d="M7.5 2h9A5.5 5.5 0 0 1 22 7.5v9A5.5 5.5 0 0 1 16.5 22h-9A5.5 5.5 0 0 1 2 16.5v-9A5.5 5.5 0 0 1 7.5 2zm0 2A3.5 3.5 0 0 0 4 7.5v9A3.5 3.5 0 0 0 7.5 20h9a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 16.5 4h-9zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm5.5-.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>
    </a>
    <a href="https://wa.me/527828295134" target="_blank">
      <svg viewBox="0 0 24 24"><path d="M12.01 2C6.5 2 2.02 6.48 2.02 12c0 1.76.46 3.46 1.34 4.95L2 22l5.44-1.37A9.92 9.92 0 0 0 12.01 22c5.52 0 10-4.48 10-10S17.53 2 12.01 2zm0 2a8 8 0 0 1 7.97 7.5 8 8 0 0 1-1.22 4.03L18 18l-2.47-.65a8 8 0 0 1-3.52.65 8 8 0 1 1 0-16zm-1.5 3h3v1h-3V7zm0 2h3v2h-3v-2zm0 3h3v2h-3v-2z"/></svg>
    </a>
  </div>
</footer>

<script>
  function initMap() {
    const tangos = { lat: 20.541667, lng: -97.445639 };
    const map = new google.maps.Map(document.getElementById("map"), {
      zoom: 18, center: tangos
    });
    new google.maps.Marker({ position:tangos, map, title:"Tango‚Äôs" });
  }
</script>
<script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCUv0bmRnGTLwNA8dgDY80Ol9J7_ZRUSWg&callback=initMap"></script>

<script type="module">
  import { createClient } from 'https://esm.sh/@supabase/supabase-js'
  const supabase = createClient(
    'https://ljlaudvreolkdppgfqul.supabase.co',
    'eyJhbGc...'
  );

  const opts = {
    bebidas:    ['smoothies','frapes','cafes','malteadas'],
    snacks:     [],
    elotes:     ['elote','esquite'],
    delicias:   ['waffles','chicharrones','fresas con crema']
  };

  const cats = document.querySelectorAll('.categoria-box');
  const subWrap = document.getElementById('subcats');
  const selectSub = document.getElementById('selectSub');
  const grid = document.getElementById('productos-container');

  function seleccionarCategoria(cat) {
    // resaltar
    cats.forEach(c=>c.classList.toggle('active',c.dataset.cat===cat));
    // cargar subcats en select
    const arr = opts[cat]||[];
    selectSub.innerHTML = `<option value="">Todas</option>` +
      arr.map(s=>`<option value="${s}">${s[0].toUpperCase()+s.slice(1)}</option>`).join('');
    subWrap.style.display = arr.length?'block':'none';
    cargarMenu(cat,null);
  }

  selectSub.addEventListener('change',()=>{
    const cat = [...cats].find(c=>c.classList.contains('active')).dataset.cat;
    cargarMenu(cat, selectSub.value||null);
  });

  async function cargarMenu(cat, sub) {
    grid.innerHTML = `<p>Cargando ${sub||cat}‚Ä¶</p>`;
    let q = supabase.from('productos').select('*').eq('categoria',cat);
    if(sub) q = q.eq('subcategoria',sub);
    const { data, error } = await q;
    if(error||!data.length) return grid.innerHTML=`<p>No hay productos.</p>`;
    grid.innerHTML = '';
    data.forEach(p=>{
      const d=document.createElement('div');
      d.className='producto-card';
      d.innerHTML=`
        <img src="${p.imagen_url}" alt="${p.nombre}"/>
        <div class="producto-content">
          <h3>${p.nombre}</h3>
          <p>${p.descripcion}</p>
          <span class="precio">$${p.precio}</span>
          <a href="https://wa.me/527828295134?text=${encodeURIComponent(p.nombre)}" class="btn-ws">Pedir</a>
        </div>`;
      grid.appendChild(d);
      requestAnimationFrame(()=>d.classList.add('visible'));
    });
  }

  cats.forEach(c=>c.addEventListener('click',()=>seleccionarCategoria(c.dataset.cat)));
  window.mostrarMenu = ()=>{
    document.getElementById('portada').style.display='none';
    document.getElementById('menu').style.display='block';
    seleccionarCategoria('bebidas');
  };

  // animar t√≠tulos
  new IntersectionObserver(entries=>{
    entries.forEach(e=>e.isIntersecting&&e.target.classList.add('visible'));
  },{threshold:0.5}).observe(document.querySelector('.seccion-titulo'));

  document.addEventListener('contextmenu',e=>e.preventDefault());
</script>
</body>
</html>
